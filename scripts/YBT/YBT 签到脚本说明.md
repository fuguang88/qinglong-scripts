# YBT 签到脚本说明

## 📋 脚本简介

YBT 自动签到脚本，专为青龙面板开发，支持多账号批量签到、智能重试和通知推送。

## 📦 脚本文件

| 文件名 | 说明 | 依赖 | 推荐度 |
|--------|------|------|--------|
| `ybt_sign.js` | YBT自动签到脚本 | 需要 axios | ⭐⭐⭐⭐⭐ |

## 🚀 快速配置

### 1. 环境变量设置

在青龙面板 `环境变量` 中添加：

```
变量名: YBT_USERS
变量值: user1&user2&user3
备注: YBT用户名列表，多个账号用&分隔
```

### 2. 定时任务配置

```
名称: YBT自动签到
命令: task scripts/YBT/ybt_sign.js
定时规则: 0 8 * * *
状态: 运行中
```

## 🔧 依赖安装（仅标准版需要）

### 方法一：青龙面板安装（推荐）

1. 进入 `依赖管理`
2. 点击 `新建依赖`
3. 填写信息：
   - 名称: `axios`
   - 类型: `nodejs`
   - 备注: `HTTP请求库`
4. 点击确定安装

### 方法二：命令行安装

```bash
# 进入青龙容器
docker exec -it qinglong bash

# 安装依赖
npm install axios
```



## 📊 执行结果说明

### ✅ 签到成功
```
✅ alice
   签到成功
   累计签到: 30 天
   获得流量: 50 MB
   总流量: 1500 MB
```

### ⚠️ 重复签到
```
✅ bob
   今日已签到
   现在还没到第二天哦~
   累计签到: 25 天
```

### ❌ 签到失败
```
❌ charlie
   用户不存在
   请检查用户名是否正确
```

## 🐛 常见问题

### Q1: 提示找不到 axios 模块？
**解决方案：**
- 按上述方法安装 axios 依赖
- 确保依赖安装成功后重新运行脚本

### Q2: 未找到环境变量 YBT_USERS？
**检查项目：**
- 变量名是否为 `YBT_USERS`（区分大小写）
- 变量值是否为空
- 是否需要重启青龙面板

### Q3: 网络请求超时？
**解决方案：**
- 检查服务器网络连接
- 脚本会自动重试3次
- 可适当增加超时时间

### Q4: 没有收到通知？
**检查项目：**
- 青龙面板通知设置是否正确
- sendNotify.js 文件是否存在
- 查看日志中的通知发送状态

## ⚙️ 脚本配置

### 可调整参数（位于脚本顶部）

```javascript
const CONFIG = {
    API_URL: 'https://api-v2.ybt.one/api/user/sign',
    TIMEOUT: 12000,     // 请求超时时间（毫秒）
    MAX_RETRY: 3,       // 最大重试次数
    RETRY_DELAY: 2000,  // 重试延迟（毫秒）
};
```

### 多账号配置格式

```
# 使用 & 分隔
user1&user2&user3

# 使用换行符分隔
user1
user2
user3
```

## 📝 日志查看

1. 在青龙面板 `定时任务` 页面
2. 找到 YBT 签到任务
3. 点击 `日志` 查看执行记录

### 日志级别
- `[INFO]` - 一般信息
- `[WARN]` - 警告信息  
- `[ERROR]` - 错误信息

## 🔔 通知支持

支持青龙面板内置的所有通知方式：
- Telegram Bot
- 微信推送
- 邮件通知
- 钉钉机器人
- Server酱
- Bark推送
- PushPlus
- 企业微信
- 飞书通知

## 📄 更新日志

### v1.1.0
- ✨ 新增内置模块版本（无依赖）
- 🔧 优化错误处理机制
- 📊 改进统计信息显示

### v1.0.0
- 🎯 支持多账号批量签到
- 🔄 智能重试机制
- 📝 完整日志记录
- 🔔 通知推送功能

---

**使用建议：** 使用前请确保已正确安装 axios 依赖，避免脚本执行失败。

**注意事项：** 请合理使用脚本，遵守 YBT 平台的使用条款。